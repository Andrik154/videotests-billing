(this["webpackJsonpkfc-free"]=this["webpackJsonpkfc-free"]||[]).push([[0],{14:function(e,t,c){},15:function(e,t,c){},17:function(e,t,c){"use strict";c.r(t);var s=c(1),i=c.n(s),r=c(9),n=c.n(r),a=(c(14),c(3)),l=c(7),d=c(6),j=c(2),o=(c(15),c(0));var b=function(e){var t=e.menu,c=Array.from(e.filter.map((function(e){return t.categories.find((function(t){return t.id===e})).products}))).flat();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("strong",{children:"City: "}),Object(o.jsx)("span",{children:window.city.title}),Object(o.jsx)("div",{className:"d-flex flex-wrap w-100 mt-3",style:{},children:t.render.map((function(e){var s=t.computableDishes[e];return c.includes(s.id)?Object(o.jsx)(o.Fragment,{}):Object(o.jsxs)("div",{className:"card mb-2 me-auto foodcard",children:[Object(o.jsxs)("div",{className:"card-body bg-light",children:[Object(o.jsx)("h6",{className:"card-title",children:s.title}),Object(o.jsx)("p",{className:"card-text"})]}),Object(o.jsx)("img",{"data-src":"".concat(window.CDN_PREFIX,"/").concat(s.image),id:"img".concat(s.id),className:"card-img-top border-top my-auto",alt:s.title,hidden:!0}),Object(o.jsxs)("ul",{className:"list-group list-group-flush",children:[Object(o.jsx)("li",{className:"list-group-item",children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-6 text-start",children:Object(o.jsx)("strong",{children:"Ccal/RUB ratio:"})}),Object(o.jsx)("div",{className:"col-6 text-start",children:s.epRatio})]})}),Object(o.jsx)("li",{className:"list-group-item",children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-6 text-start",children:Object(o.jsx)("strong",{children:"Volume"})}),Object(o.jsx)("div",{className:"col-6 text-start",children:"Dish"===s.type?"".concat(s.m," ").concat(s.mm):"-"})]})}),Object(o.jsx)("li",{className:"list-group-item",children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col-6 text-start",children:Object(o.jsx)("strong",{children:"Price:"})}),Object(o.jsxs)("div",{className:"col-6 text-start",children:[(s.price/100).toFixed(2),"\u20bd"]})]})}),Object(o.jsx)("li",{className:"list-group-item",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-12",children:Object(o.jsx)("button",{className:"btn-link",onClick:function(e){e.preventDefault();var t=document.querySelector("#img".concat(s.id));t.setAttribute("src",t.getAttribute("data-src")),t.removeAttribute("hidden")},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0444\u043e\u0442\u043e"})})})})]}),Object(o.jsx)("div",{className:"px-3 py-2",children:Object(o.jsx)(j.a,{href:"/dish/".concat(s.id),className:"btn btn-primary",children:"\u0423\u0437\u043d\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435"})})]})}))})]})};var h=function(e){var t=e.id,c=e.menu,s=c.computableDishes[t];return"Dish"===s.type?Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col-12 col-md-6",children:[Object(o.jsx)("img",{src:"".concat(window.CDN_PREFIX,"295x0/").concat(s.image),alt:s.title,style:{maxHeight:"30vh"}}),Object(o.jsx)("h4",{children:Object(o.jsx)("strong",{children:s.title})})]}),Object(o.jsxs)("div",{className:"col-12 col-md-6",children:[Object(o.jsx)("h5",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430:"}),Object(o.jsx)("p",{children:s.descr}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"\u041c\u0430\u0441\u0441\u0430/\u041e\u0431\u044a\u0435\u043c:"})," ",s.m," ",s.mm]}),Object(o.jsx)("h5",{children:"\u041a\u0411\u0416\u0423 (\u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u043d\u043e)"}),Object(o.jsxs)("table",{className:"table table-bordered w-50",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"\u041a"}),Object(o.jsx)("th",{children:"\u0411"}),Object(o.jsx)("th",{children:"\u0416"}),Object(o.jsx)("th",{children:"\u0423"})]})}),Object(o.jsx)("tbody",{children:Object(o.jsxs)("tr",{children:[Object(o.jsxs)("td",{children:[s.cfpCalc.e," \u043a\u043a\u0430\u043b"]}),Object(o.jsxs)("td",{children:[s.cfpCalc.p," \u0433"]}),Object(o.jsxs)("td",{children:[s.cfpCalc.f," \u0433"]}),Object(o.jsxs)("td",{children:[s.cfpCalc.c," \u0433"]})]})})]})]})]}):"Combo"===s.type?Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("div",{className:"col-12 col-md-6",children:[Object(o.jsx)("img",{src:"".concat(window.CDN_PREFIX,"295x0/").concat(s.image),alt:s.title,style:{maxHeight:"30vh"}}),Object(o.jsx)("h4",{children:Object(o.jsx)("strong",{children:s.title})})]}),Object(o.jsxs)("div",{className:"col-12 col-md-6",children:[Object(o.jsx)("h5",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430:"}),Object(o.jsx)("p",{children:s.descr}),Object(o.jsx)("h5",{children:"\u041a\u0411\u0416\u0423 (\u0440\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u043d\u043e, \u043d\u0435\u0442\u043e\u0447\u043d\u043e)"}),Object(o.jsxs)("table",{className:"table table-bordered w-50",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"\u041a"}),Object(o.jsx)("th",{children:"\u0411"}),Object(o.jsx)("th",{children:"\u0416"}),Object(o.jsx)("th",{children:"\u0423"})]})}),Object(o.jsx)("tbody",{children:Object(o.jsxs)("tr",{children:[Object(o.jsxs)("td",{children:[s.cfp.e," \u043a\u043a\u0430\u043b"]}),Object(o.jsxs)("td",{children:[s.cfp.p," \u0433"]}),Object(o.jsxs)("td",{children:[s.cfp.f," \u0433"]}),Object(o.jsxs)("td",{children:[s.cfp.c," \u0433"]})]})})]}),Object(o.jsx)("h5",{children:"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f:"}),Object(o.jsx)("ul",{children:s.consistsOf.map((function(e){var t=c.computableDishes[e]||!1;return t?Object(o.jsxs)("li",{children:[t.title," - ",t.cfpCalc.e," ccal"]}):Object(o.jsx)(o.Fragment,{})}))})]})]}):void 0};var x=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h1",{children:"\u0421\u0422\u0410\u0412\u042c \u041b\u0410\u0419\u041a \u0415\u0421\u041b\u0418"}),Object(o.jsx)("p",{style:{fontSize:"5px"},children:"\u0437\u043d\u0430\u0435\u0448\u044c \u0432\u0441\u0435 \u0442\u0440\u0435\u043a\u0438 \u043c\u043e\u0440\u0433\u0435\u043d\u0430 \u043d\u0430\u0438\u0437\u0443\u0441\u0442\u044c"}),Object(o.jsxs)("div",{className:"w-100",children:[Object(o.jsx)("h4",{children:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435!"}),Object(o.jsx)("p",{children:"\u0415\u0441\u0442\u044c \u0431\u0430\u0433\u0438 \u0441 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u043c\u0438 \u043a\u0443\u043f\u043e\u043d\u0430\u043c\u0438 \u043f\u043e \u043f\u0440\u0438\u0447\u0438\u043d\u0435 \u0432 \u043d\u0438\u0445 \u0432\u0445\u043e\u0434\u044f\u0442 \u043f\u043e\u0437\u0438\u0446\u0438\u0438, \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043f\u043e \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u043d\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442\u0441\u044f \u0432 \u043c\u0435\u043d\u044e, \u0442\u0430\u043a \u0447\u0442\u043e \u0432\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0437\u0443\u0447\u0430\u0439\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u0438 \u0438 \u043e\u0431\u0440\u0430\u0449\u0430\u0439\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043d\u0430 \u0432\u0441\u0435"}),Object(o.jsx)("p",{children:"\u041d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u0438 \u0438\u043c\u0435\u044e\u0442 \u0441\u043e\u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u0435 \u043a\u043a\u0430\u043b/\u0440\u0443\u0431 \u0440\u0430\u0432\u043d\u043e\u0435 \u043d\u0443\u043b\u044e, \u0442\u0430\u043a \u043a\u0430\u043a KFC \u043d\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u043b\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043f\u043e \u043f\u043e\u0437\u0438\u0446\u0438\u0438"}),Object(o.jsxs)("ul",{children:[Object(o.jsxs)("li",{children:[Object(o.jsx)(j.a,{href:"/table",className:"d-inline ml-2",children:"\u0422\u0430\u0431\u043b\u0438\u0447\u043a\u0430"})," - \u0442\u0430\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0432\u0438\u0434"]}),Object(o.jsxs)("li",{children:[Object(o.jsx)(j.a,{href:"/cards",className:"d-inline ml-2 mt-2",children:"\u041a\u0430\u0440\u0442\u043e\u0447\u043a\u0438"})," - \u0442\u0438\u043f\u043e \u043a\u0430\u043a \u0432 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0435"]}),Object(o.jsxs)("li",{children:[Object(o.jsx)(j.a,{href:"/settings",className:"d-inline ml-2 mt-2",children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})," - \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u0447\u043a\u0438 (\u0433\u043e\u0440\u043e\u0434, \u0444\u0438\u043b\u044c\u0442\u0440)"]})]})]})]})};var m=function(e){var t=e.categories,c=e.setFilter,i=e.filter,r=Object(s.useState)([]),n=Object(a.a)(r,2),l=n[0],d=n[1],j=Object(s.useState)(!1),b=Object(a.a)(j,2),h=b[0],x=b[1],m=Object(s.useState)([]),O=Object(a.a)(m,2),u=O[0],p=O[1];return Object(s.useEffect)((function(){fetch("https://api.kfc.com/api/store/v2/store.get_cities",{method:"POST"}).then((function(e){return e.json()})).then((function(e){var t=[];return e.value.cities.forEach((function(e){e.defaultStore&&t.push({defaultStore:e.defaultStore.id||!1,searchstring:Object.keys(e.title).map((function(t){return e.title[t]})).join(""),title:e.title.ru})})),t})).then((function(e){d(e),x(!0)}))}),[]),h?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h4",{children:"Set city"}),Object(o.jsx)("strong",{children:"City: "}),Object(o.jsx)("span",{children:window.city.title}),Object(o.jsx)("br",{}),Object(o.jsx)("input",{className:"col-12 col-md-4",type:"text",onChange:function(e){return function(e,t,c){e.preventDefault();var s=e.target.value,i=[];s.length>=2&&(t.some((function(e){return e.searchstring.toLowerCase().includes(s.toLowerCase())&&i.push({title:e.title,defaultStore:e.defaultStore}),i.length>4})),c(i))}(e,l,p)},placeholder:"City..."}),Object(o.jsx)("ul",{className:"list-group mt-2",children:u.length>0?Object(o.jsx)(o.Fragment,{children:u.map((function(e){return Object(o.jsxs)("li",{className:"list-group-item d-flex justify-content-between py-0 px-1 col-12 col-md-4",children:[e.title," ",Object(o.jsx)("button",{className:"btn-link",onClick:function(t){t.preventDefault(),localStorage.setItem("city",JSON.stringify({title:e.title,id:e.defaultStore})),localStorage.setItem("filter","[]"),window.location.reload()},children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c"})]})}))}):Object(o.jsx)(o.Fragment,{})}),Object(o.jsx)("hr",{}),Object(o.jsx)("h4",{children:"Set filter"}),Object(o.jsx)("div",{className:"form-check d-flex flex-wrap",children:t.map((function(e){return Object(o.jsxs)("div",{className:"col-12 col-sm-6 col-md-3",onChange:function(t){!function(e,t,c){var s=t.indexOf(e);s>-1?t.splice(s,1):t.push(e),localStorage.setItem("filter",JSON.stringify(t)),c(t)}(e.id,i,c),console.log(i)},children:[Object(o.jsx)("input",{className:"form-check-input",type:"checkbox",defaultChecked:!(i.indexOf(e.id)>-1),name:e.id}),Object(o.jsx)("label",{className:"form-check-label",htmlFor:e.id,children:e.title})]})}))})]}):Object(o.jsx)(o.Fragment,{children:"Fetching some data..."})};var O=function(e){var t=e.menu,c=Array.from(e.filter.map((function(e){return t.categories.find((function(t){return t.id===e})).products}))).flat();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("strong",{children:"City: "}),Object(o.jsx)("span",{children:window.city.title}),Object(o.jsxs)("table",{className:"table table-bordered mt-3",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"title"}),Object(o.jsx)("th",{children:"ccal/rub"}),Object(o.jsx)("th",{children:"price"})]})}),Object(o.jsx)("tbody",{children:t.render.map((function(e){var s=t.computableDishes[e];return c.includes(s.id)?Object(o.jsx)(o.Fragment,{}):Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:Object(o.jsx)(j.a,{href:"/dish/".concat(s.id),children:s.title})}),Object(o.jsx)("td",{children:s.epRatio}),Object(o.jsxs)("td",{children:[(s.price/100).toFixed(2),"\u20bd"]})]})}))})]})]})};var u=function(){var e=Object(s.useState)([]),t=Object(a.a)(e,2),c=t[0],i=t[1],r=Object(s.useState)(!1),n=Object(a.a)(r,2),u=n[0],p=n[1],f=Object(s.useState)(JSON.parse(localStorage.getItem("filter"))||[]),g=Object(a.a)(f,2),v=g[0],N=g[1];return Object(s.useEffect)((function(){fetch("https://api.kfc.com/api/menu/api/v1/menu.short/".concat(window.city.id,"/website/finger_lickin_good")).then((function(e){return e.json()})).then((function(e){return console.log(e),e})).then((function(e){i(function(e){var t={computableDishes:{},categories:[].concat(Object(d.a)(e.value.categories.main),Object(d.a)(e.value.categories.coupons)),render:[]};return Object.keys(e.value.products).forEach((function(c){var s=e.value.products[c];if("Dish"===s.type&&void 0!==s.carbs&&void 0!==s.volume&&void 0!==s.energy){var i=s.volume.gr||s.volume.ml,r=Object.keys(s.volume)[0],n={type:s.type,delivery:s.delivery||!1,inStore:s.inStore||!1,price:s.price,title:s.title,descr:s.descr,id:s.id,composition:s.composition||!1,image:s.image,m:i,mm:r,cfp:{c:s.carbs.gr,f:s.fats.gr,p:s.proteins.gr,e:s.energy.ccal},cfpCalc:{c:parseFloat((s.carbs.gr*i/100).toFixed(2)),f:parseFloat((s.fats.gr*i/100).toFixed(2)),p:parseFloat((s.proteins.gr*i/100).toFixed(2)),e:parseFloat((s.energy.ccal*i/100).toFixed(2))},epRatio:parseFloat((s.energy.ccal*i/100/(s.price/100)).toFixed(2))};Object.assign(t.computableDishes,Object(l.a)({},n.id,n)),t.render.push(s.id)}else if("Dish"===s.type){var a={type:s.type,delivery:s.delivery||!1,price:s.price,title:s.title,descr:s.descr,id:s.id,image:s.image,m:0,mm:"",cfp:{c:0,f:0,p:0,e:0},cfpCalc:{c:0,f:0,p:0,e:0},epRatio:0};Object.assign(t.computableDishes,Object(l.a)({},s.id,a)),t.render.push(s.id)}})),Object.keys(e.value.products).forEach((function(c){var s=e.value.products[c];if("Combo"===s.type){var i=[],r={c:0,f:0,p:0,e:0};s.modifierGroups.forEach((function(e){var c=e.modifiers[0].productId;i.push(c);var s=t.computableDishes[c]||!1;s&&(r.c+=s.cfpCalc.c,r.f+=s.cfpCalc.f,r.p+=s.cfpCalc.p,r.e+=s.cfpCalc.e)}));var n={type:s.type,delivery:s.delivery||!1,price:s.price,title:s.title,descr:s.descr,id:s.id,composition:s.composition,image:s.image,consistsOf:i,cfp:r,cfpCalc:r,epRatio:parseFloat((r.e/(s.price/100)).toFixed(2))};Object.assign(t.computableDishes,Object(l.a)({},s.id,n)),t.render.push(s.id)}})),t.render=t.render.sort((function(e,c){return t.computableDishes[c].epRatio-t.computableDishes[e].epRatio})),console.log(t),t}(e)),p(!0)}))}),[]),u?Object(o.jsxs)("div",{children:[Object(o.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(o.jsxs)("div",{className:"container-fluid col-12 col-lg-10 mx-auto",children:[Object(o.jsx)(j.a,{className:"navbar-brand",href:"/",children:"KFCfree"}),Object(o.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(o.jsx)("span",{className:"navbar-toggler-icon"})}),Object(o.jsx)("div",{className:"collapse navbar-collapse",id:"navbarText",children:Object(o.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(j.a,{href:"/table",className:"nav-link",children:"Table"})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(j.a,{href:"/card",className:"nav-link",children:"Card"})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(j.a,{href:"/settings",className:"nav-link",children:"Settings"})})]})})]})}),Object(o.jsx)("main",{className:"col-12 col-lg-10 mx-auto mt-3 mb-3 px-3",children:Object(o.jsxs)(j.d,{children:[Object(o.jsx)(j.b,{path:"/",children:function(){return Object(o.jsx)(x,{})}}),Object(o.jsx)(j.b,{path:"/table",children:function(){return Object(o.jsx)(O,{menu:c,filter:v})}}),Object(o.jsx)(j.b,{path:"/card",children:function(){return Object(o.jsx)(b,{menu:c,filter:v})}}),Object(o.jsx)(j.b,{path:"/settings",children:function(){return Object(o.jsx)(m,{categories:c.categories,filter:v,setFilter:N})}}),Object(o.jsx)(j.b,{path:"/dish/:id",children:function(e){return Object(o.jsx)(h,{id:e.id,menu:c})}})]})}),Object(o.jsx)("footer",{className:"bg-dark",children:Object(o.jsx)("div",{className:"col-12 col-lg-10 mx-auto my-auto py-2 px-3",children:Object(o.jsxs)("span",{className:"text-white",children:["Made by ",Object(o.jsx)("a",{href:"https://vk.com/gluchnosti",className:"text-muted",children:"gluchnosti"})]})})})]}):Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{children:"Fetching some data"})})},p=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,18)).then((function(t){var c=t.getCLS,s=t.getFID,i=t.getFCP,r=t.getLCP,n=t.getTTFB;c(e),s(e),i(e),r(e),n(e)}))};window.city=JSON.parse(localStorage.getItem("city"))||{title:"\u041c\u043e\u0441\u043a\u0432\u0430",id:"74013271"},window.CDN_PREFIX="https://s82079.cdn.ngenix.net/",n.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(j.c,{base:"/kfc",children:Object(o.jsx)(u,{})})}),document.getElementById("root")),p()}},[[17,1,2]]]);
//# sourceMappingURL=main.824b0cab.chunk.js.map