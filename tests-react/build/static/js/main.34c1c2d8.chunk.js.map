{"version":3,"sources":["components/Testlist.js","components/Signin.js","components/Usertest.js","components/Addtest.js","components/Purchase.js","components/Afterlife.js","components/Payment.js","components/Success.js","components/Err404.js","components/Index.js","App.js","index.js"],"names":["Testlist","useState","isLoading","setLoading","testlist","setTestlist","selectVal","setSelectVal","useEffect","fetch","window","API_LINK","then","res","json","data","Array","from","push","Object","assign","console","log","classList","name","value","onChange","e","target","keys","map","grade","className","item","id","stats","Signin","props","toggleblock","settoggleblock","nosuccess","setnosuccess","JSON","parse","localStorage","getItem","savedcreds","setsavedcreds","useLocation","loggedin","setLoggedin","to","onSubmit","preventDefault","form","login","elements","inputLogin","pass","inputPass","method","headers","body","stringify","r","d","success","storageData","PHPSESSID","save","checked","setItem","setAdditionalData","backend","setuser","hidden","for","type","placeholder","defaultValue","disabled","required","class","role","Usertest","setLocation","user","show","style","height","maxHeight","additionalData","pupil","tests","incomplite","test","title","fakeId","compliteCount","onClick","href","lastMemberId","Addtest","f","payload","answers","questions","price","alert","catch","Purchase","redir","setshow","setTest","nomoney","setnomoney","handling","sethandling","exists","color","firstname","lastname","find","i","cash","setcash","location","origin","Afterlife","errorsList","text","Payment","handleUi","isNaN","parseFloat","promoEvent","promo","checkedPromo","ui","setUi","multiplier","setMultiplier","ready","setReady","newPromo","setNewPromo","setCheckedPromo","setHandling","useRef","errors","setErrors","ref","current","inputSum","inputPromo","uiStatus","promoStatus","key","step","min","publicKey","amount","toFixed","account","encodeURIComponent","customFields","themeCode","lifetime","Date","now","getFullYear","getMonth","getDate","getHours","getMinutes","successUrl","restP","qsp","URLSearchParams","url","toString","goodPromo","length","Success","sum","get","Err404","Index","textDecoration","App","setIsLoading","a","removeItem","err","marginLeft","path","component","p","ReactDOM","render","StrictMode","base","document","getElementById"],"mappings":"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","file":"static/js/main.34c1c2d8.chunk.js","sourcesContent":["import React, {useEffect, useState} from 'react';\r\n\r\nfunction Testlist(){\r\n    const [isLoading, setLoading] = useState(true);\r\n\r\n    const [testlist, setTestlist] = useState({});\r\n    const [selectVal, setSelectVal] = useState(0);\r\n\r\n    useEffect(()=>{\r\n        fetch(window.API_LINK+'/gettestlist').then(res=>res.json()).then(data=>{\r\n            let newTestlist = Array.from(testlist).push(data);\r\n           setTestlist(Object.assign(testlist, data));\r\n           setLoading(false);\r\n        })\r\n        console.log(testlist);\r\n    },[])\r\n\r\n    if(isLoading){\r\n        return(\r\n            <div>\r\n                Loading data from server...\r\n            </div>\r\n        );\r\n    } else {\r\n        return (\r\n            <div>\r\n                <strong>Choose your grade: </strong>\r\n                <select classList=\"p-0\" name=\"grade\" value={selectVal} onChange={e=>setSelectVal(e.target.value)}>\r\n                    <option value=\"0\">-</option>\r\n                    {Object.keys(testlist).map((grade)=>{\r\n                        return(\r\n                            <option value={grade}>{grade}</option>\r\n                        );\r\n                    })}\r\n                </select>\r\n                {selectVal!=0 && \r\n                <div className=\"container-fluid mt-3 px-0\">\r\n                        {testlist[selectVal].map((item)=>{\r\n                            console.log(item)\r\n                            return(\r\n                                <div className=\"row mt-2\">\r\n                                    <div className=\"col-sm-12 col-md-6\">\r\n                                        <div className=\"border rounded p-1\">\r\n                                        <strong>{item.name}</strong> <br/>\r\n                                        <strong>Id:</strong> {item.id} <br/>\r\n                                        <strong>Score:</strong> {item.stats} <br/>\r\n                                        <button className=\"btn btn-success py-0 px-2 m-0\">GET IT DONE!!!</button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                </div>}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Testlist;","import React, {useState, useEffect} from \"react\";\r\nimport { Redirect } from \"wouter\";\r\nimport useLocation from \"wouter/use-location\";\r\n\r\nfunction Signin(props){\r\n    const [toggleblock, settoggleblock] = useState(false);\r\n    const [nosuccess, setnosuccess] = useState(false);\r\n    const [savedcreds, setsavedcreds] = useState(JSON.parse(localStorage.getItem('credentials')));\r\n    const [location, setLocation] = useLocation();\r\n    const [loggedin, setLoggedin] = useState(false);\r\n\r\n    function signin(e){\r\n        e.preventDefault();\r\n        let form = e.target;\r\n        settoggleblock(true);\r\n        let login = form.elements.inputLogin.value;\r\n        let pass = form.elements.inputPass.value;\r\n        fetch(window.API_LINK+\"/signin\", {\r\n            method:\"POST\",\r\n            headers:{\r\n                'content-type':'application/json'\r\n            },\r\n            body:JSON.stringify({\r\n                \"pupil\":{\r\n                    \"login\":login,\r\n                    \"pass\":pass\r\n                }\r\n            })\r\n        }).then(r=>r.json()).then(d=>{\r\n            if (d.success){\r\n                setnosuccess(false);\r\n                let storageData = {\r\n                    \"login\":login,\r\n                    \"pass\":pass,\r\n                    \"PHPSESSID\":d.PHPSESSID\r\n                }\r\n                fetch(window.API_LINK+'/getdata',\r\n                {\r\n                    method:\"post\",\r\n                    headers:{\r\n                        'content-type':'application/json'\r\n                    },\r\n                    body:JSON.stringify({\r\n                        \"PHPSESSID\":storageData.PHPSESSID,\r\n                        \"login\":storageData.login\r\n                    })\r\n                }).then(r=>r.json()).then(d=>{\r\n                    if (d.success){ \r\n                        if(form.elements.save.checked){\r\n                            savedcreds?localStorage.setItem('credentials',JSON.stringify([login, pass])):localStorage.setItem('credentials',JSON.stringify([login, pass]));\r\n                            setsavedcreds(JSON.parse(localStorage.getItem('credentials')));\r\n                        }\r\n                        setLoggedin(true);\r\n                        props.setAdditionalData(Object.assign(d.backend));\r\n                        localStorage.setItem('user',JSON.stringify(storageData));\r\n                        props.setuser(storageData);\r\n                        settoggleblock(false);\r\n                    } else {\r\n                        setnosuccess(true);\r\n                        settoggleblock(false); \r\n                    }\r\n                })\r\n\r\n            } else {\r\n                setnosuccess(true);\r\n                settoggleblock(false);  \r\n            }\r\n        })\r\n    }\r\n    \r\n    return(\r\n        <div className=\"col-12 col-md-5 rounded mx-auto mt-5 border rounded-0\">\r\n            {loggedin&&<Redirect to=\"/\" />}\r\n            <div className=\"border-bottom mb-1 px-3 pt-2 bg-light\">\r\n                <h5>Вход</h5>\r\n            </div>\r\n            <form onSubmit={signin} className=\"px-3 py-2\">\r\n                <div className=\"row text-danger mb-2\" hidden={!nosuccess}>\r\n                    <div className=\"col-sm-12\">\r\n                        Неверный логин/пароль\r\n                    </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <label for=\"inputLogin\" className=\"col-4 col-form-label\">Логин</label>\r\n                    <div className=\"col-8\">\r\n                        <input name=\"inputLogin\" type=\"text\" placeholder=\"2281488\" className=\"w-100\" defaultValue={savedcreds&&savedcreds[0]} disabled={toggleblock} required/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <label for=\"inputPass\" className=\"col-4 col-form-label\">Пароль</label>\r\n                    <div className=\"col-8\">\r\n                        <input name=\"inputPass\" type=\"text\" placeholder=\"3ad6\" className=\"w-100\" defaultValue={savedcreds&&savedcreds[1]} disabled={toggleblock} required/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <div className=\"col-4\">\r\n                    </div>\r\n                    <div className=\"col-8\">\r\n                        <div className=\"form-check\">\r\n                            <input class=\"form-check-input\" type=\"checkbox\" name=\"save\" value/>\r\n                            <label class=\"form-check-label\" for=\"save\">\r\n                                Сохранить реквизиты\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"d-flex align-items-center mt-2\">\r\n                    <button name=\"submit\" type=\"submit\" class=\"btn btn-primary\" disabled={toggleblock}>Войти</button>\r\n                    <div className=\"mx-3\" hidden={!toggleblock}>\r\n                        <div class=\"spinner-border\" role=\"status\">\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Signin;","import React, {useState} from 'react';\r\nimport { Redirect, useLocation} from 'wouter';\r\n\r\nfunction Usertest(props){\r\n    const [location, setLocation] = useLocation();\r\n    const [show, setshow] = useState(props.user&&true);\r\n\r\n    if(show){\r\n        return(\r\n            <div style={{height:\"80vh\"}}>\r\n                <div className=\"col-12 overflow-auto mt-2\" style={{maxHeight:\"100%\"}}>\r\n                {props.additionalData.pupil.tests.map((item)=>{\r\n                            console.log(item)\r\n                            return (\r\n                                item.incomplite!==null\r\n                                ?\r\n                                    <>\r\n                                    <div className=\"col-12\">\r\n                                        <div className=\"border-bottom rounded-0 p-2 pt-1 py-3\">\r\n                                            <strong>{item.test.title}</strong> <br/>\r\n                                            <strong>Id:</strong> {item.test.fakeId} <br/>\r\n                                            <button className=\"btn btn-warning py-0 m-0 rounded-0 w-50 mt-1\" disabled={true}>Выполняется</button>\r\n                                        </div>\r\n                                    </div>\r\n                                    </>\r\n                                :\r\n                                    item.compliteCount==0\r\n                                    ?\r\n                                        <>\r\n                                        <div className=\"col-12\">\r\n                                            <div className=\"border-bottom rounded-0 p-2 pt-1 py-3\">\r\n                                            <strong>{item.test.title}</strong> <br/>\r\n                                            <strong>Id:</strong> {item.test.fakeId} <br/>\r\n                                            <button className=\"btn btn-success py-0 px-2 m-0 rounded-0 w-50 mt-1\" onClick={()=>setLocation(`/purchase/${item.test.fakeId}`)}>Заказать</button>\r\n                                            </div>\r\n                                        </div>\r\n                                        </>\r\n                                    :\r\n                                    <>\r\n                                        <div className=\"col-12\">\r\n                                            <div className=\"border-bottom rounded-0 p-2 pt-1 py-3\">\r\n                                            <strong>{item.test.title}</strong> <br/>\r\n                                            <strong>Id:</strong> {item.test.fakeId} <br/>\r\n                                            <a href={`https://videouroki.net/tests/complete/${item.lastMemberId}`} target=\"_blank\">Узнать оценку</a> <br/>\r\n                                            <button className=\"btn btn-dark py-0 px-2 m-0 rounded-0 w-50 mt-1\" disabled={true}>Выполнен</button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </>\r\n                            );\r\n                        })}\r\n                </div>\r\n            </div>\r\n        )\r\n    } else {\r\n        return(\r\n            <>\r\n                <Redirect to=\"/signin\"/>\r\n            </>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Usertest;","function Addtest(){\r\n    function send(e){\r\n        e.preventDefault();\r\n        let f= e.target;\r\n        let payload = {\r\n            \"pass\": f.elements.pass.value,\r\n            \"id\": f.elements.id.value,\r\n            \"answers\": f.elements.answers.value,\r\n            \"questions\": f.elements.questions.value,\r\n            \"price\": f.elements.price.value\r\n        }\r\n\r\n        fetch (window.API_LINK + '/addtest', {\r\n            method: \"POST\",\r\n            headers:{\r\n                \"content-type\":\"application/json\"\r\n            },\r\n            body: JSON.stringify(payload)\r\n        }).then(r=>r.json()).then(d=>{d.success?alert('OK'):alert('something WENT VERY WRONG')}).catch(e=>alert(`err: ${e}`));\r\n    }\r\n    return(\r\n        <div>\r\n            <form onSubmit={send}>\r\n            <input type=\"text\" placeholder=\"pass\" name=\"pass\"></input> <br/>\r\n            <input type=\"text\" placeholder=\"test id\" name=\"id\"></input> <br/>\r\n            <input type=\"text\" placeholder=\"answers\" name=\"answers\"></input> <br/>\r\n            <input type=\"text\" placeholder=\"questions\" name=\"questions\"></input> <br/>\r\n            <input type=\"text\" placeholder=\"price (В КОПЕЙКАХ РУБЛИ*100)\" name=\"price\"></input> <br/>\r\n            <button>send</button>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Addtest;","import React, {useState, useEffect} from \"react\";\r\nimport { Redirect, useLocation } from \"wouter\";\r\n\r\nfunction Purchase(props){\r\n    const [redir, setredir] = useState(props.user&&true);\r\n    const [show, setshow] = useState(false);\r\n    const [test, setTest] = useState(false);\r\n    const [nomoney, setnomoney] = useState(false);\r\n    const [handling, sethandling] = useState(false);\r\n    const [location, setLocation] = useLocation();\r\n    function handlePayment(e){\r\n        if(test>props.additionalData.cash){\r\n            setnomoney(true);\r\n        } else {\r\n            sethandling(true);\r\n            fetch(window.API_LINK + '/purchasetest', {\r\n                method:'POST',\r\n                headers:{\r\n                    'content-type':'application/json'\r\n                },\r\n                body:JSON.stringify({\r\n                    login:props.user.login,\r\n                    pass: props.user.pass,\r\n                    test: props.id\r\n                })\r\n            }).then(r=>r.json()).then(d=>{\r\n                if(d.success){\r\n                    props.setcash(props.cash-test);\r\n                    window.location.href = `${window.location.origin}/tests/afterlife`\r\n                } else {\r\n                    sethandling(false);\r\n                    alert('Unsucessful; try again; contact developers if necessary');\r\n                }\r\n            })\r\n        }\r\n    }\r\n    useEffect(()=>{\r\n        fetch(window.API_LINK + '/test', {\r\n            method:'POST',\r\n            headers:{\r\n                'content-type':'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                id: props.id\r\n            })\r\n        }).then(r=>r.json()).then(d=>{\r\n                if(d.success){\r\n                    if(d.exists){\r\n                        setTest(d.exists);\r\n                        setshow(true);\r\n                    } else {\r\n                        setshow(true);\r\n                    }\r\n                } else {\r\n                    alert('ERROR; reload the page');\r\n                }\r\n            })\r\n    },[])\r\n    if(!redir){\r\n        return <Redirect to=\"/signin\" />\r\n    } else if(show){\r\n        if(!test){\r\n            return (\r\n            <div>\r\n                <div className=\"col-12 mt-2\">\r\n                    <p><strong>Account: </strong>{props.additionalData.pupil.firstname} {props.additionalData.pupil.lastname}</p>\r\n                    <p><strong>Test: </strong>{props.additionalData.pupil.tests.find(i=>i.test.fakeId==props.id).test.title}</p>\r\n                    <p><strong>Unfortunately, the test is not in database yet. Come back later!</strong></p>\r\n                </div>\r\n            </div>\r\n            )\r\n        } else {\r\n            return (\r\n                <div>\r\n                    <div className=\"col-12 mt-2\">\r\n                        <span color=\"red\" hidden={!nomoney}><strong>You don't have enough money!</strong></span>\r\n                        <p><strong>Account: </strong>{props.additionalData.pupil.firstname} {props.additionalData.pupil.lastname}</p>\r\n                        <p><strong>Test: </strong>{props.additionalData.pupil.tests.find(i=>i.test.fakeId==props.id).test.title}</p>\r\n                        <p><strong>Balance: </strong>{props.cash/100>>0}.{props.cash%100} RUR</p>\r\n                        <p><strong>Price: </strong>{test/100>>0}.{test%100} RUR</p>\r\n                        <div className=\"d-flex align-items-center mt-2\">\r\n                            <button className=\"btn btn-success rounded-0 py-1 px-3 w-50 h-100 d-block\" disabled={props.additionalData.cash<test} disabled={handling} onClick={handlePayment}>Confirm order</button>\r\n                            <div className=\"mx-3\" hidden={!handling}>\r\n                                <div class=\"spinner-border\" role=\"status\">\r\n                                    <span class=\"visually-hidden\">Loading...</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n    } else {\r\n        return (<div>Fetching some data...</div>)\r\n    }\r\n}\r\n\r\nexport default Purchase;","function Afterlife(){\r\n    return (\r\n        <>\r\n            <h4 className=\"mt-2\">\r\n                Спасибо за покупку!\r\n            </h4>\r\n            <h5 className=\"text-danger\">Внимание!</h5>\r\n            <p>\r\n                Ответы были вбиты; теперь Вам остается лишь подождать определенное время (например минут 7, чтобы учитель ничего не заподозрил), войти в свой аккаунт на сайте videouroki.net и нажать \"Продолжить\" на заказанном тесте. Тест будет уже выполнен либо будут вбиты ответы, и Вам останется лишь завершить тест.\r\n            </p>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Afterlife;","import { useState, useRef } from \"react\"\r\nimport { useLocation, Redirect } from \"wouter\";\r\n\r\nconst errorsList = {\r\n    \"nan\":{\r\n        text:\"Введённая сумма должна быть числом!\",\r\n    },\r\n    \"empty\":{\r\n        text:\"Введите сумму!\",\r\n    },\r\n    \"badPromo\":{\r\n        text:\"Промокод не существует\",\r\n    }\r\n}\r\nfunction Payment(props){\r\n    const [location, setLocation] = useLocation();\r\n    const [show, setshow] = useState(props.user&&true);\r\n    const handlePayment = (e)=>{\r\n        e.preventDefault();\r\n        const dateHandler = (d)=>`${d.getFullYear()}-${d.getMonth()<10?`0${d.getMonth()}`:d.getMonth()}-${d.getDate()<10?`0${d.getDate()}`:d.getDate()}Т${d.getHours()<10?`0${d.getHours()}`:d.getHours()}${d.getMinutes()<10?`0${d.getMinutes()}`:d.getMinutes()}`\r\n        const payload = {\r\n            publicKey:\"48e7qUxn9T7RyYE1MVZswX1FRSbE6iyCj2gCRwwF3Dnh5XrasNTx3BGPiMsyXQFNKQhvukniQG8RTVhYm3iPv6GW1dNY2axMhQYJVgqd3ZZWtm2qa9DTWve4GtjW1NwUBCZm7u6TuSmpuUdjE5hyJNKrwVJt8mQbJGtX2j8LoPmvL9M7uRdj4pwWtUVDp\",\r\n            amount: ui.toFixed(2),\r\n            account: encodeURIComponent(props.user.login),\r\n            customFields: {\r\n                promo: encodeURIComponent(checkedPromo.text),\r\n                themeCode: \"Andrei-LLlD4scgVW\"\r\n            },\r\n            lifetime: `${dateHandler(new Date(Date.now()+25*60e3))}`,\r\n            successUrl: `${window.location.origin}/tests/success?amount=${ui.toFixed(2)}`\r\n        }\r\n        const {customFields, ...restP} = payload;\r\n        const qsp = new URLSearchParams({...restP});\r\n        const url = `https://oplata.qiwi.com/create?${qsp.toString()}&customFields[promo]=${customFields.promo}&customFields[themeCode]=${customFields.themeCode}`;\r\n        window.location.href = url;\r\n    }\r\n    const handleForm = (e)=>{\r\n        var errors = [];\r\n        const ui = form.current.elements.inputSum.value;\r\n        const promo = form.current.elements.inputPromo.value;\r\n\r\n        const uiStatus = handleUi(ui);\r\n        const promoStatus = promoEvent(promo);\r\n        switch (uiStatus){\r\n            case 0:\r\n                setUi(parseFloat(ui));\r\n                break;\r\n            case 1:\r\n                errors.push(\"empty\");\r\n                setUi(0);\r\n                break;\r\n            case 2:\r\n                errors.push(\"nan\");\r\n                setUi(0);\r\n                break;\r\n            case 3:\r\n                errors.push(\"empty\");\r\n                setUi(0);\r\n                break;\r\n        }\r\n        switch(promoStatus){\r\n            case 0:\r\n                setMultiplier(checkedPromo.multiplier);\r\n                setNewPromo(false);\r\n                break;\r\n            case 1:\r\n                setMultiplier(1.0);\r\n                setNewPromo(promo)\r\n                break;\r\n        }\r\n        if(uiStatus===0 && promoStatus===0){\r\n            setReady(true);\r\n        } else {\r\n            setReady(false);\r\n        }\r\n        setErrors(errors);\r\n    }\r\n    const handleUi = (i)=>{\r\n        if(isNaN(i)){\r\n            return 2;\r\n        } else if (i==\"\"){\r\n            return 1;\r\n        } else if (parseFloat(i)==0){\r\n            return 3;\r\n        }  else {\r\n            return 0;\r\n        }\r\n    }\r\n    const promoEvent = (promo)=>{\r\n        if (promo==checkedPromo.text){\r\n            return 0;\r\n        } else {\r\n            return 1;\r\n        }\r\n    }\r\n    const handlePromo = (e)=>{\r\n        e.preventDefault();\r\n        const promo = newPromo;\r\n        setHandling(true);\r\n        fetch(window.API_LINK + '/promo', {\r\n            method:'POST',\r\n            headers:{\r\n                'content-type':'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                promo: promo\r\n            })\r\n        }).then(r=>r.json()).then(d=>{\r\n            setHandling(false);\r\n            if (!d.success){\r\n                alert('Something bad happened; try again')\r\n            } else {\r\n                if(d.goodPromo){\r\n                    setNewPromo(false);\r\n                    setCheckedPromo({\r\n                        text: promo,\r\n                        multiplier: d.multiplier\r\n                    })\r\n                    setMultiplier(d.multiplier);\r\n                    if(errors.length==0){\r\n                        setReady(true);\r\n                    }\r\n                } else {\r\n                    errors.push(\"badPromo\")\r\n                    setErrors(errors);\r\n                    setMultiplier(1.0);\r\n                    setCheckedPromo({text:\"\", multiplier:1.0});\r\n                }\r\n            }\r\n        }).catch(e=>alert(`Something bad happened, try again; ${e}`))\r\n    }\r\n    const [ui, setUi] = useState(150);\r\n    const [multiplier, setMultiplier] = useState(1.0);\r\n    const [ready, setReady] = useState(true);\r\n    const [newPromo, setNewPromo] = useState(false);\r\n    const [checkedPromo, setCheckedPromo] = useState({text:\"\", multiplier:1.0});\r\n    const [handling, setHandling] = useState(false);\r\n    const form = useRef(null);\r\n    var [errors, setErrors]  = useState([]);\r\n\r\n    if(!show){\r\n        return <Redirect to=\"/signin\"/>\r\n    }\r\n    return (\r\n        <div className=\"col-12 col-md-5 mx-auto mt-5 border\">  \r\n            <div className=\"border-bottom mb-1 px-3 pt-2 bg-light\">\r\n                <h5>Пополнить счёт</h5>\r\n            </div>\r\n            <form  className=\"px-3 py-2\" ref={form} onSubmit={(e)=>{e.preventDefault()}} onChange={handleForm}>\r\n                {\r\n                    errors.map((key)=><div className=\"row text-danger mb-1\"><div className=\"col-12\">{errorsList[key].text}</div></div>)\r\n                }\r\n                <div className=\"row align-items-center\">\r\n                    <label for=\"inputSum\" className=\"col-4 col-form-label\">Сумма*</label>\r\n                    <div className=\"col-8\">\r\n                        <input name=\"inputSum\" type=\"number\" step=\"15.0\" min=\"0\" placeholder=\"150.00\" className=\"w-100\" defaultValue={ui} required/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row align-items-center\">\r\n                    <label for=\"inputPromo\" className=\"col-4 col-form-label\">Промокод</label>\r\n                    <div className=\"col-8\">\r\n                        <input name=\"inputPromo\" type=\"text\" placeholder=\"AMOGA25\" className=\"w-100\"/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row align-items-center\">\r\n                    <label for=\"inputTotal\" className=\"col-4 col-form-label\">Итого:</label>\r\n                    <div className=\"col-8\">\r\n                        <input name=\"inputTotal\" type=\"text\" placeholder=\"123.0\" className=\"w-100\"  value={`${ui*multiplier} RUR`} disabled/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"d-flex align-items-center mt-2\">\r\n                    <button name=\"submit\" type=\"submit\" class=\"btn btn-primary\" onClick={handlePayment} disabled={!ready}>Пополнить</button>\r\n                    <button name=\"submit\" type=\"\" class=\"btn btn-outline-primary ms-2\" onClick={handlePromo} disabled={!newPromo}>Проверить промо</button>\r\n                    <div className=\"mx-3\" >\r\n                        <div class=\"spinner-border\" role=\"status\" hidden={!handling}>\r\n                            <span class=\"visually-hidden\">Loading...</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Payment;","function Success(){\r\n    const params = new URLSearchParams(window.location.search);\r\n    const sum = params.get(\"amount\");\r\n    return (\r\n        <>\r\n            <h4 className=\"mt-2\">\r\n                Ваш счет был пополнен на {sum} рублей\r\n            </h4>\r\n            <h5 className=\"text-danger\">Внимание!</h5>\r\n            <p>\r\n                Если в ближайшее время сумма не появится на счету - свяжитесь с администрацией\r\n            </p>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Success;","function Err404(){\r\n    return (\r\n        <>\r\n            <h4>Запрашиваемой страницы не существует!</h4>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Err404;","import { Link } from 'wouter';\r\n\r\nfunction Index(){\r\n    return (\r\n        <div className=\"mt-2\">\r\n            <h1>Тесты — больше не проблема!</h1>\r\n            <h3>Если есть денежная сумма</h3>\r\n            <div className=\"d-flex align-items-center\">\r\n                <button className=\"btn btn-outline-light border rounded-10\">\r\n                    <Link href=\"/pay\" style={{textDecoration:\"none\", color:\"gray\"}}>Пополнить счёт</Link>\r\n                </button>\r\n                <button className=\"btn btn-outline-light border rounded-10 ms-2\">\r\n                    <Link href=\"/usertests\" style={{textDecoration:\"none\", color:\"gray\"}}>Тесты на аккаунте</Link>\r\n                </button>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Index;","import { Link, Route, Redirect, useLocation, Switch } from \"wouter\";\r\nimport React, {useEffect, useState} from 'react';\r\n\r\nimport Testlist from './components/Testlist';\r\nimport Signin from './components/Signin';\r\nimport Usertest from './components/Usertest';\r\nimport Addtest from './components/Addtest';\r\nimport Purchase from './components/Purchase';\r\nimport Afterlife from './components/Afterlife';\r\nimport Payment from './components/Payment';\r\nimport Success from \"./components/Success\";\r\nimport Err404 from \"./components/Err404\";\r\nimport Index from \"./components/Index\";\r\n\r\nfunction App() {\r\n  const [location, setLocation] = useLocation();\r\n  const [user,setuser] = useState(JSON.parse(localStorage.getItem('user')));\r\n  const [additionalData,setAdditionalData]=useState({});\r\n  const [cash, setcash]=useState(0);\r\n  const [isLoading, setIsLoading]=useState(true);\r\n\r\n  useEffect(async ()=>{\r\n    setIsLoading(true);\r\n    if(!user){\r\n      setIsLoading(false);\r\n    } else {\r\n      await fetch(window.API_LINK+'/getdata',\r\n        {\r\n            method:\"post\",\r\n            headers:{\r\n                'content-type':'application/json'\r\n            },\r\n            body:JSON.stringify({\r\n                \"PHPSESSID\":user.PHPSESSID,\r\n                \"login\":user.login\r\n            })\r\n        }).then(r=>r.json()).then(d=>{\r\n          if (d.success){\r\n            setAdditionalData(Object.assign(additionalData, d.backend));\r\n          } else {\r\n            setuser(null);\r\n            localStorage.removeItem('user');\r\n          }\r\n            \r\n        }).catch((err)=>{\r\n          setuser(null);\r\n          localStorage.removeItem('user');\r\n        })\r\n        await fetch(window.API_LINK+'/getcash',{\r\n          method:\"post\",\r\n          headers:{\r\n              'content-type':'application/json'\r\n          },\r\n          body:JSON.stringify({\r\n              \"PHPSESSID\":user.PHPSESSID,\r\n              \"login\":user.login\r\n          })\r\n        }).then(r=>r.json()).then(d=>{\r\n          setAdditionalData(Object.assign(additionalData, {'cash':d.cash}));\r\n          setcash(d.cash);\r\n        })\r\n        setIsLoading(false);\r\n    }\r\n  },[user])\r\n  if(isLoading){\r\n    return (\r\n      <div className=\"d-flex mx-auto align-items-center\" id=\"loadscreen\">\r\n          <strong>Loading...</strong>\r\n          <div class=\"spinner-border ms-auto\" role=\"status\" aria-hidden=\"true\"></div>\r\n      </div>\r\n    )\r\n  } else {\r\n    return (\r\n      <div>\r\n        <header className=\"mt-2 border-bottom\">\r\n          <div className=\"col-12 col-md-10 col-lg-8 d-flex mx-auto align-items-center px-2\" id=\"navitems\">\r\n            <Link href=\"/\"><h4 id=\"logo\">TestiKupit</h4></Link>\r\n            <Link href=\"/usertests\" style={{marginLeft:\"30px\"}}>Тесты</Link>\r\n            <Link href=\"/pay\" style={{marginLeft:\"30px\"}}>Пополнить</Link>\r\n            <div style={{\"marginLeft\":\"auto\"}}>\r\n                  {user?<span id=\"acc\">{additionalData.pupil.firstname} {cash/100>>0}.{cash%100} RUR<span style={{marginLeft:\"8px\"}}>(<a href=\"#\" onClick={(e)=>{e.preventDefault();localStorage.removeItem('user'); setLocation('/signin'); setuser(null);}}>Выйти</a>)</span></span>:<Link href=\"/signin\">Войти</Link>}\r\n            </div>\r\n          </div>\r\n        </header> \r\n        <main>\r\n          <div className=\"col-12 col-md-10 col-lg-8 mx-auto px-2\">\r\n            <Switch>\r\n              <Route path=\"/\" component={Index}/>\r\n              <Route path=\"/testlist\" component={Testlist} />\r\n              <Route path=\"/usertests\" component={()=> <Usertest user={user} additionalData={additionalData}/>} />\r\n              <Route path=\"/addtest\" component={Addtest}/>\r\n              <Route path=\"/purchase\">{()=>{return (<Redirect to=\"/usertests\"/>)}}</Route>\r\n              <Route path=\"/purchase/:id\">{(p)=>{return (<Purchase id={p.id} user={user} additionalData={additionalData} cash={cash} setcash={setcash}/>)}}</Route>\r\n              <Route path=\"/signin\" component={()=> <Signin setuser={setuser} setAdditionalData={setAdditionalData}/>} />\r\n              <Route path=\"/afterlife\" component={Afterlife} />\r\n              <Route path=\"/pay\" component={()=><Payment user={user} />} />\r\n              <Route path=\"/success\" component={Success} />\r\n              <Route path=\"\" component={Err404} />\r\n            </Switch>\r\n          </div>\r\n        </main>\r\n        <footer className=\"border-top bg-light\">\r\n          <div className=\"col-12 col-md-10 col-lg-8 mx-auto text-black py-2 px-2\">\r\n            By <a href=\"https://vk.com/gluchnosti\" target=\"_blank\" className=\"text-black\" style={{textDecoration:\"underline\", color:\"#AAAAAA\"}}>gluchnosti</a>\r\n          </div>\r\n        </footer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Router } from 'wouter';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nwindow.API_LINK = `${window.location.origin}/tests/api`;\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Router base=\"/tests\">\r\n      <App />\r\n    </Router>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}