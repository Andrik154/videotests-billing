(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{19:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),a=n(11),r=n.n(a),i=n(3),o=(n(19),n(10)),l=n.n(o),d=n(12),j=n(2),b=n(0);var u=function(){var e=Object(c.useState)(!0),t=Object(j.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)({}),r=Object(j.a)(a,2),i=r[0],o=r[1],l=Object(c.useState)(0),d=Object(j.a)(l,2),u=d[0],h=d[1];return Object(c.useEffect)((function(){fetch(window.API_LINK+"/gettestlist").then((function(e){return e.json()})).then((function(e){Array.from(i).push(e);o(Object.assign(i,e)),s(!1)})),console.log(i)}),[]),n?Object(b.jsx)("div",{children:"Loading data from server..."}):Object(b.jsxs)("div",{children:[Object(b.jsx)("strong",{children:"Choose your grade: "}),Object(b.jsxs)("select",{classList:"p-0",name:"grade",value:u,onChange:function(e){return h(e.target.value)},children:[Object(b.jsx)("option",{value:"0",children:"-"}),Object.keys(i).map((function(e){return Object(b.jsx)("option",{value:e,children:e})}))]}),0!=u&&Object(b.jsx)("div",{className:"container-fluid mt-3 px-0",children:i[u].map((function(e){return console.log(e),Object(b.jsx)("div",{className:"row mt-2",children:Object(b.jsx)("div",{className:"col-sm-12 col-md-6",children:Object(b.jsxs)("div",{className:"border rounded p-1",children:[Object(b.jsx)("strong",{children:e.name})," ",Object(b.jsx)("br",{}),Object(b.jsx)("strong",{children:"Id:"})," ",e.id," ",Object(b.jsx)("br",{}),Object(b.jsx)("strong",{children:"Score:"})," ",e.stats," ",Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"btn btn-success py-0 px-2 m-0",children:"GET IT DONE!!!"})]})})})}))})]})},h=n(8);var m=function(e){var t=Object(c.useState)(!1),n=Object(j.a)(t,2),s=n[0],a=n[1],r=Object(c.useState)(!1),o=Object(j.a)(r,2),l=o[0],d=o[1],u=Object(c.useState)(JSON.parse(localStorage.getItem("credentials"))),m=Object(j.a)(u,2),O=m[0],p=m[1],x=Object(h.a)(),f=Object(j.a)(x,2),g=(f[0],f[1],Object(c.useState)(!1)),v=Object(j.a)(g,2),y=v[0],N=v[1];return Object(b.jsxs)("div",{className:"col-12 col-md-5 rounded mx-auto mt-5 border rounded-0",children:[y&&Object(b.jsx)(i.b,{to:"/"}),Object(b.jsx)("div",{className:"border-bottom mb-1 px-3 pt-2 bg-light",children:Object(b.jsx)("h5",{children:"\u0412\u0445\u043e\u0434"})}),Object(b.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=t.target;a(!0);var c=n.elements.inputLogin.value,s=n.elements.inputPass.value;fetch(window.API_LINK+"/signin",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({pupil:{login:c,pass:s}})}).then((function(e){return e.json()})).then((function(t){if(t.success){d(!1);var r={login:c,pass:s,PHPSESSID:t.PHPSESSID};fetch(window.API_LINK+"/getdata",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({PHPSESSID:r.PHPSESSID,login:r.login})}).then((function(e){return e.json()})).then((function(t){t.success?(n.elements.save.checked&&(localStorage.setItem("credentials",JSON.stringify([c,s])),p(JSON.parse(localStorage.getItem("credentials")))),N(!0),e.setAdditionalData(Object.assign(t.backend)),localStorage.setItem("user",JSON.stringify(r)),e.setuser(r),a(!1)):(d(!0),a(!1))}))}else d(!0),a(!1)}))},className:"px-3 py-2",children:[Object(b.jsx)("div",{className:"row text-danger mb-2",hidden:!l,children:Object(b.jsx)("div",{className:"col-sm-12",children:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d/\u043f\u0430\u0440\u043e\u043b\u044c"})}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("label",{for:"inputLogin",className:"col-4 col-form-label",children:"\u041b\u043e\u0433\u0438\u043d"}),Object(b.jsx)("div",{className:"col-8",children:Object(b.jsx)("input",{name:"inputLogin",type:"text",placeholder:"2281488",className:"w-100",defaultValue:O&&O[0],disabled:s,required:!0})})]}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("label",{for:"inputPass",className:"col-4 col-form-label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(b.jsx)("div",{className:"col-8",children:Object(b.jsx)("input",{name:"inputPass",type:"text",placeholder:"3ad6",className:"w-100",defaultValue:O&&O[1],disabled:s,required:!0})})]}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-4"}),Object(b.jsx)("div",{className:"col-8",children:Object(b.jsxs)("div",{className:"form-check",children:[Object(b.jsx)("input",{class:"form-check-input",type:"checkbox",name:"save",value:!0}),Object(b.jsx)("label",{class:"form-check-label",for:"save",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0440\u0435\u043a\u0432\u0438\u0437\u0438\u0442\u044b"})]})})]}),Object(b.jsxs)("div",{className:"d-flex align-items-center mt-2",children:[Object(b.jsx)("button",{name:"submit",type:"submit",class:"btn btn-primary",disabled:s,children:"\u0412\u043e\u0439\u0442\u0438"}),Object(b.jsx)("div",{className:"mx-3",hidden:!s,children:Object(b.jsx)("div",{class:"spinner-border",role:"status",children:Object(b.jsx)("span",{class:"visually-hidden",children:"Loading..."})})})]})]})]})};var O=function(e){var t=Object(i.f)(),n=Object(j.a)(t,2),s=(n[0],n[1]),a=Object(c.useState)(e.user&&!0),r=Object(j.a)(a,2),o=r[0];return r[1],o?Object(b.jsx)("div",{style:{height:"70vh"},children:Object(b.jsx)("div",{className:"col-12 overflow-auto mt-2",style:{maxHeight:"100%"},children:e.additionalData.pupil.tests.map((function(e){return console.log(e),null!==e.incomplite?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"col-12",children:Object(b.jsxs)("div",{className:"border-bottom rounded-0 p-2 pt-1 py-3",children:[Object(b.jsx)("strong",{children:e.test.title})," ",Object(b.jsx)("br",{}),Object(b.jsx)("strong",{children:"Id:"})," ",e.test.fakeId," ",Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"btn btn-warning py-0 m-0 rounded-0 w-50 mt-1",disabled:!0,children:"\u0412\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f"})]})})}):0==e.compliteCount?Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"col-12",children:Object(b.jsxs)("div",{className:"border-bottom rounded-0 p-2 pt-1 py-3",children:[Object(b.jsx)("strong",{children:e.test.title})," ",Object(b.jsx)("br",{}),Object(b.jsx)("strong",{children:"Id:"})," ",e.test.fakeId," ",Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"btn btn-success py-0 px-2 m-0 rounded-0 w-50 mt-1",onClick:function(){return s("/purchase/".concat(e.test.fakeId))},children:"\u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c"})]})})}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{className:"col-12",children:Object(b.jsxs)("div",{className:"border-bottom rounded-0 p-2 pt-1 py-3",children:[Object(b.jsx)("strong",{children:e.test.title})," ",Object(b.jsx)("br",{}),Object(b.jsx)("strong",{children:"Id:"})," ",e.test.fakeId," ",Object(b.jsx)("br",{}),Object(b.jsx)("a",{href:"https://videouroki.net/tests/complete/".concat(e.lastMemberId),target:"_blank",children:"\u0423\u0437\u043d\u0430\u0442\u044c \u043e\u0446\u0435\u043d\u043a\u0443"})," ",Object(b.jsx)("br",{}),Object(b.jsx)("button",{className:"btn btn-dark py-0 px-2 m-0 rounded-0 w-50 mt-1",disabled:!0,children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"})]})})})}))})}):Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(i.b,{to:"/signin"})})};var p=function(){return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target,n={pass:t.elements.pass.value,id:t.elements.id.value,answers:t.elements.answers.value,questions:t.elements.questions.value,price:t.elements.price.value};fetch(window.API_LINK+"/addtest",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){e.success?alert("OK"):alert("something WENT VERY WRONG")})).catch((function(e){return alert("err: ".concat(e))}))},children:[Object(b.jsx)("input",{type:"text",placeholder:"pass",name:"pass"})," ",Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"text",placeholder:"test id",name:"id"})," ",Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"text",placeholder:"answers",name:"answers"})," ",Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"text",placeholder:"questions",name:"questions"})," ",Object(b.jsx)("br",{}),Object(b.jsx)("input",{type:"text",placeholder:"price (\u0412 \u041a\u041e\u041f\u0415\u0419\u041a\u0410\u0425 \u0420\u0423\u0411\u041b\u0418*100)",name:"price"})," ",Object(b.jsx)("br",{}),Object(b.jsx)("button",{children:"send"})]})})},x=n(6);var f=function(e){var t,n=Object(c.useState)(e.user&&!0),s=Object(j.a)(n,2),a=s[0],r=(s[1],Object(c.useState)(!1)),o=Object(j.a)(r,2),l=o[0],d=o[1],u=Object(c.useState)(!1),h=Object(j.a)(u,2),m=h[0],O=h[1],p=Object(c.useState)(!1),f=Object(j.a)(p,2),g=f[0],v=f[1],y=Object(c.useState)(!1),N=Object(j.a)(y,2),S=N[0],w=N[1],I=Object(i.f)(),P=Object(j.a)(I,2);return P[0],P[1],Object(c.useEffect)((function(){fetch(window.API_LINK+"/test",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({id:e.id})}).then((function(e){return e.json()})).then((function(e){e.success?e.exists?(O(e.exists),d(!0)):d(!0):alert("ERROR; reload the page")}))}),[]),a?l?m?Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"col-12 mt-2",children:[Object(b.jsx)("span",{color:"red",hidden:!g,children:Object(b.jsx)("strong",{children:"You don't have enough money!"})}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Account: "}),e.additionalData.pupil.firstname," ",e.additionalData.pupil.lastname]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Test: "}),e.additionalData.pupil.tests.find((function(t){return t.test.fakeId==e.id})).test.title]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Balance: "}),e.cash/100>>0,".",e.cash%100," RUR"]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Price: "}),m/100>>0,".",m%100," RUR"]}),Object(b.jsxs)("div",{className:"d-flex align-items-center mt-2",children:[Object(b.jsx)("button",(t={className:"btn btn-success rounded-0 py-1 px-3 w-50 h-100 d-block",disabled:e.additionalData.cash<m},Object(x.a)(t,"disabled",S),Object(x.a)(t,"onClick",(function(t){m>e.additionalData.cash?v(!0):(w(!0),fetch(window.API_LINK+"/purchasetest",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({login:e.user.login,pass:e.user.pass,test:e.id})}).then((function(e){return e.json()})).then((function(t){t.success?(e.setcash(e.cash-m),window.location.href="".concat(window.location.origin,"/tests/afterlife?t=").concat(t.t)):(w(!1),t.fatal?alert("\u041d\u0435\u0443\u0434\u0430\u0447\u043d\u0430\u044f \u043f\u043e\u043f\u044b\u0442\u043a\u0430, \u043d\u043e \u043d\u0438\u0447\u0435\u0433\u043e \u0441\u0442\u0440\u0430\u0448\u043d\u043e\u0433\u043e; \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437"):alert("\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430, \u043f\u0440\u0438 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b \u043d\u0435\u0445\u043e\u0440\u043e\u0448\u0438\u0435 \u043f\u043e\u0441\u043b\u0435\u0434\u0441\u0442\u0432\u0438\u044f.\n\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435, \u043d\u0430\u0447\u0430\u0442 \u043b\u0438 \u0442\u0435\u0441\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b \u0437\u0430\u043a\u0430\u0437\u044b\u0432\u0430\u043b\u0438.\n\u0415\u0441\u043b\u0438 \u0434\u0430, \u0442\u043e \u041e\u0411\u042f\u0417\u0410\u0422\u0415\u041b\u042c\u041d\u041e \u0441\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441 \u0431\u043b\u0438\u0437\u043a\u0438\u043c\u0438 \u043a \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0443 \u043b\u0438\u0446\u0430\u043c\u0438 \u0438 \u043e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0443"))})))})),Object(x.a)(t,"children","Confirm order"),t)),Object(b.jsx)("div",{className:"mx-3",hidden:!S,children:Object(b.jsx)("div",{class:"spinner-border",role:"status",children:Object(b.jsx)("span",{class:"visually-hidden",children:"Loading..."})})})]})]})}):Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"col-12 mt-2",children:[Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Account: "}),e.additionalData.pupil.firstname," ",e.additionalData.pupil.lastname]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Test: "}),e.additionalData.pupil.tests.find((function(t){return t.test.fakeId==e.id})).test.title]}),Object(b.jsx)("p",{children:Object(b.jsx)("strong",{children:"Unfortunately, the test is not in database yet. Come back later!"})})]})}):Object(b.jsx)("div",{children:"Fetching some data..."}):Object(b.jsx)(i.b,{to:"/signin"})};var g=function(){var e=new URLSearchParams(window.location.search).get("t");return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("h4",{className:"mt-2",children:["\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u043f\u043e\u043a\u0443\u043f\u043a\u0443! \u0412\u0430\u0448 \u0442\u0435\u0441\u0442 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e \u0447\u0435\u0440\u0435\u0437 ",e," \u0441\u0435\u043a\u0443\u043d\u0434 (",(e/60).toFixed(2)," \u043c\u0438\u043d\u0443\u0442)."]}),Object(b.jsx)("h5",{className:"text-danger",children:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435!"}),Object(b.jsx)("p",{children:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0442\u0435\u0441\u0442 \u043f\u043e\u0441\u043b\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u043d\u043e\u0433\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f. \u0415\u0441\u043b\u0438 \u043e\u043d \u043d\u0435\u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d, \u0442\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u0435 (\u0435\u0441\u043b\u0438 \u043e\u0442\u0432\u0435\u0442\u044b \u0432\u0432\u0435\u0434\u0435\u043d\u044b)."})]})},v=n(13),y=n(14),N=["customFields"],S={nan:{text:"\u0412\u0432\u0435\u0434\u0451\u043d\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0447\u0438\u0441\u043b\u043e\u043c!"},empty:{text:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0443\u043c\u043c\u0443!"},badPromo:{text:"\u041f\u0440\u043e\u043c\u043e\u043a\u043e\u0434 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"}};var w=function(e){var t=Object(i.f)(),n=Object(j.a)(t,2),s=(n[0],n[1],Object(c.useState)(e.user&&!0)),a=Object(j.a)(s,2),r=a[0],o=(a[1],function(e){return isNaN(e)?2:""==e?1:0==parseFloat(e)?3:0}),l=function(e){return e==F.text?0:1},d=Object(c.useState)(150),u=Object(j.a)(d,2),h=u[0],m=u[1],O=Object(c.useState)(1),p=Object(j.a)(O,2),x=p[0],f=p[1],g=Object(c.useState)(!0),w=Object(j.a)(g,2),I=w[0],P=w[1],A=Object(c.useState)(!1),D=Object(j.a)(A,2),L=D[0],k=D[1],T=Object(c.useState)({text:"",multiplier:1}),R=Object(j.a)(T,2),F=R[0],E=R[1],J=Object(c.useState)(!1),K=Object(j.a)(J,2),C=K[0],M=K[1],_=Object(c.useRef)(null),H=Object(c.useState)([]),U=Object(j.a)(H,2),q=U[0],V=U[1];return r?Object(b.jsxs)("div",{className:"col-12 col-md-5 mx-auto mt-5 border",children:[Object(b.jsx)("div",{className:"border-bottom mb-1 px-3 pt-2 bg-light",children:Object(b.jsx)("h5",{children:"\u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0441\u0447\u0451\u0442"})}),Object(b.jsxs)("form",{className:"px-3 py-2",ref:_,onSubmit:function(e){e.preventDefault()},onChange:function(e){var t=[],n=_.current.elements.inputSum.value,c=_.current.elements.inputPromo.value,s=o(n),a=l(c);switch(s){case 0:m(parseFloat(n));break;case 1:t.push("empty"),m(0);break;case 2:t.push("nan"),m(0);break;case 3:t.push("empty"),m(0)}switch(a){case 0:f(F.multiplier),k(!1);break;case 1:f(1),k(c)}P(0===s&&0===a),V(t)},children:[q.map((function(e){return Object(b.jsx)("div",{className:"row text-danger mb-1",children:Object(b.jsx)("div",{className:"col-12",children:S[e].text})})})),Object(b.jsxs)("div",{className:"row align-items-center",children:[Object(b.jsx)("label",{for:"inputSum",className:"col-4 col-form-label",children:"\u0421\u0443\u043c\u043c\u0430*"}),Object(b.jsx)("div",{className:"col-8",children:Object(b.jsx)("input",{name:"inputSum",type:"number",step:"15.0",min:"0",placeholder:"150.00",className:"w-100",defaultValue:h,required:!0})})]}),Object(b.jsxs)("div",{className:"row align-items-center",children:[Object(b.jsx)("label",{for:"inputPromo",className:"col-4 col-form-label",children:"\u041f\u0440\u043e\u043c\u043e\u043a\u043e\u0434"}),Object(b.jsx)("div",{className:"col-8",children:Object(b.jsx)("input",{name:"inputPromo",type:"text",placeholder:"AMOGA25",className:"w-100"})})]}),Object(b.jsxs)("div",{className:"row align-items-center",children:[Object(b.jsx)("label",{for:"inputTotal",className:"col-4 col-form-label",children:"\u0418\u0442\u043e\u0433\u043e:"}),Object(b.jsx)("div",{className:"col-8",children:Object(b.jsx)("input",{name:"inputTotal",type:"text",placeholder:"123.0",className:"w-100",value:"".concat(h*x," RUR"),disabled:!0})})]}),Object(b.jsxs)("div",{className:"d-flex align-items-center mt-2",children:[Object(b.jsx)("button",{name:"submit",type:"submit",class:"btn btn-primary",onClick:function(t){t.preventDefault();var n,c={publicKey:"48e7qUxn9T7RyYE1MVZswX1FRSbE6iyCj2gCRwwF3Dnh5XrasNTx3BGPiMsyXQFNKQhvukniQG8RTVhYm3iPv6GW1dNY2axMhQYJVgqd3ZZWtm2qa9DTWve4GtjW1NwUBCZm7u6TuSmpuUdjE5hyJNKrwVJt8mQbJGtX2j8LoPmvL9M7uRdj4pwWtUVDp",amount:h.toFixed(2),account:encodeURIComponent(e.user.login),customFields:{promo:encodeURIComponent(F.text),themeCode:"Andrei-LLlD4scgVW"},lifetime:"".concat((n=new Date(Date.now()+15e5),"".concat(n.getFullYear(),"-").concat(n.getMonth()<10?"0".concat(n.getMonth()):n.getMonth(),"-").concat(n.getDate()<10?"0".concat(n.getDate()):n.getDate(),"\u0422").concat(n.getHours()<10?"0".concat(n.getHours()):n.getHours()).concat(n.getMinutes()<10?"0".concat(n.getMinutes()):n.getMinutes()))),comment:"".concat(e.additionalData.pupil.firstname," ").concat(e.additionalData.pupil.lastname," ").concat(F.text," - ").concat(F.multiplier),successUrl:"".concat(window.location.origin,"/tests/success?amount=").concat((h*F.multiplier).toFixed(2))},s=c.customFields,a=Object(y.a)(c,N),r=new URLSearchParams(Object(v.a)({},a)),i="https://oplata.qiwi.com/create?".concat(r.toString(),"&customFields[promo]=").concat(s.promo,"&customFields[themeCode]=").concat(s.themeCode);window.location.href=i},disabled:!I,children:"\u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c"}),Object(b.jsx)("button",{name:"submit",type:"",class:"btn btn-outline-primary ms-2",onClick:function(e){e.preventDefault();var t=L;M(!0),fetch(window.API_LINK+"/promo",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({promo:t})}).then((function(e){return e.json()})).then((function(e){M(!1),e.success?e.goodPromo?(k(!1),E({text:t,multiplier:e.multiplier}),f(e.multiplier),0==q.length&&P(!0)):(q.push("badPromo"),V(q),f(1),E({text:"",multiplier:1})):alert("Something bad happened; try again")})).catch((function(e){return alert("Something bad happened, try again; ".concat(e))}))},disabled:!L,children:"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u0440\u043e\u043c\u043e"}),Object(b.jsx)("div",{className:"mx-3",children:Object(b.jsx)("div",{class:"spinner-border",role:"status",hidden:!C,children:Object(b.jsx)("span",{class:"visually-hidden",children:"Loading..."})})})]})]})]}):Object(b.jsx)(i.b,{to:"/signin"})};var I=function(){var e=new URLSearchParams(window.location.search).get("amount");return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("h4",{className:"mt-2",children:["\u0412\u0430\u0448 \u0441\u0447\u0435\u0442 \u0431\u044b\u043b \u043f\u043e\u043f\u043e\u043b\u043d\u0435\u043d \u043d\u0430 ",e," \u0440\u0443\u0431\u043b\u0435\u0439"]}),Object(b.jsx)("h5",{className:"text-danger",children:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435!"}),Object(b.jsx)("p",{children:"\u0415\u0441\u043b\u0438 \u0432 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0441\u0443\u043c\u043c\u0430 \u043d\u0435 \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u043d\u0430 \u0441\u0447\u0435\u0442\u0443 - \u0441\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0435\u0439"})]})};var P=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("h4",{children:"\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442!"})})};var A=function(){return Object(b.jsxs)("div",{className:"mt-2",children:[Object(b.jsx)("h1",{children:"\u0422\u0435\u0441\u0442\u044b \u2014 \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430!"}),Object(b.jsx)("h3",{children:"\u0415\u0441\u043b\u0438 \u0435\u0441\u0442\u044c \u0434\u0435\u043d\u0435\u0436\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430"}),Object(b.jsxs)("div",{className:"d-flex align-items-center",children:[Object(b.jsx)("button",{className:"btn btn-outline-light border rounded-10",children:Object(b.jsx)(i.a,{href:"/pay",style:{textDecoration:"none",color:"gray"},children:"\u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0441\u0447\u0451\u0442"})}),Object(b.jsx)("button",{className:"btn btn-outline-light border rounded-10 ms-2",children:Object(b.jsx)(i.a,{href:"/usertests",style:{textDecoration:"none",color:"gray"},children:"\u0422\u0435\u0441\u0442\u044b \u043d\u0430 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0435"})})]}),Object(b.jsx)("img",{src:"./xd.jpg",width:"300",className:"mt-2"})]})};var D=function(){var e=Object(c.useState)(localStorage.getItem("adminpass")),t=Object(j.a)(e,2),n=t[0],s=(t[1],Object(c.useState)(!1)),a=Object(j.a)(s,2),r=a[0],i=a[1];return Object(c.useEffect)((function(){void 0!=n?fetch(window.API_LINK+"/adminauth",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({pass:n})}).then((function(e){return e.json()})).then((function(e){e.success?i(!0):i(!1),!e.success&&localStorage.removeItem("adminpass")})):(localStorage.setItem("adminpass",prompt("adminpass?")),window.location.reload())}),[]),r?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("form",{onSubmit:function(e){return function(e,t){e.preventDefault();var n=e.currentTarget,c=n.querySelector("tbody");n.elements.button.setAttribute("disabled",!1),fetch(window.API_LINK+"/adminlistpromos",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({pass:t})}).then((function(e){return e.json()})).then((function(e){c.setAttribute("disabled",!1);var t="";e.promos.forEach((function(e){t+="<tr><td>".concat(e.promo,"</td><td>").concat(e.multiplier,"</td></tr>\n")})),c.innerHTML=t,n.elements.button.removeAttribute("disabled")}))}(e,n)},children:[Object(b.jsx)("h5",{children:"List promos"}),Object(b.jsxs)("table",{className:"table table-striped table-bordered",style:{width:"fit-content"},children:[Object(b.jsxs)("thead",{children:[Object(b.jsx)("th",{children:"Promo"}),Object(b.jsx)("th",{children:"Factor"})]}),Object(b.jsx)("tbody",{})]}),Object(b.jsx)("button",{name:"button",children:"List"})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("form",{onSubmit:function(e){return function(e,t){e.preventDefault();var n=e.currentTarget,c=n.elements.promo.value,s=n.elements.factor.value;n.elements.button.setAttribute("disabled",!1),fetch(window.API_LINK+"/adminaddpromo",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({pass:t,promo:c,multiplier:s})}).then((function(e){return e.json()})).then((function(e){e.success?alert("OK"):alert("NOT OK ERR\n"),n.elements.button.removeAttribute("disabled")}))}(e,n)},children:[Object(b.jsx)("h5",{children:"Add promo"}),Object(b.jsx)("input",{name:"promo",placeholder:"AMOGA25"}),Object(b.jsx)("input",{name:"factor",placeholder:"1.25"}),Object(b.jsx)("button",{name:"button",children:"Add"})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("form",{onSubmit:function(e){return function(e,t){e.preventDefault();var n=e.currentTarget,c=n.elements.promo.value;n.elements.button.setAttribute("disabled",!1),fetch(window.API_LINK+"/adminremovepromo",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({pass:t,promo:c})}).then((function(e){return e.json()})).then((function(e){e.success?alert("OK"):alert("NOT OK ERR\n"),n.elements.button.removeAttribute("disabled")}))}(e,n)},children:[Object(b.jsx)("h5",{children:"Remove promo"}),Object(b.jsx)("input",{name:"promo",placeholder:"AMOGA25"}),Object(b.jsx)("button",{name:"button",children:"Remove"})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("form",{onSubmit:function(e){return function(e,t){e.preventDefault();var n=e.currentTarget,c=n.elements.number.value,s=n.querySelector("tbody");n.elements.button.setAttribute("disabled",!1),fetch(window.API_LINK+"/adminlistorders",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({pass:t,number:parseInt(c)})}).then((function(e){return e.json()})).then((function(e){s.setAttribute("disabled",!1);var t="";e.orders.forEach((function(e){t+="<tr><td>".concat(e.id,"</td><td>").concat(e.type,"</td><td>").concat((e.price/100).toFixed(2),"</td><td>").concat(e.details,"</td><td>").concat(e.customer,"</td></tr>\n")})),s.innerHTML=t,n.elements.button.removeAttribute("disabled")}))}(e,n)},children:[Object(b.jsx)("h5",{children:"List orders"}),Object(b.jsx)("input",{name:"number",type:"text",placeholder:"10",defaultValue:"25"}),Object(b.jsxs)("table",{className:"table table-striped table-bordered overflow-auto d-block",style:{width:"fit-content",maxHeight:"50vh"},children:[Object(b.jsxs)("thead",{children:[Object(b.jsx)("th",{children:"Id"}),Object(b.jsx)("th",{children:"Type"}),Object(b.jsx)("th",{children:"Price"}),Object(b.jsx)("th",{children:"Details"}),Object(b.jsx)("th",{children:"Customer"})]}),Object(b.jsx)("tbody",{})]}),Object(b.jsx)("button",{name:"button",children:"List"})]}),Object(b.jsx)("hr",{}),Object(b.jsxs)("form",{onSubmit:function(e){return function(e,t){e.preventDefault();var n=e.currentTarget,c=n.elements.number.value,s=n.querySelector("tbody");n.elements.button.setAttribute("disabled",!1),fetch(window.API_LINK+"/adminlistusers",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({pass:t,number:parseInt(c)})}).then((function(e){return e.json()})).then((function(e){s.setAttribute("disabled",!1);var t="";e.users.forEach((function(e){t+="<tr><td>".concat(e.login,"</td><td>").concat(e.pass,"</td><td>").concat((e.cash/100).toFixed(2),"</td></tr>\n")})),s.innerHTML=t,n.elements.button.removeAttribute("disabled")}))}(e,n)},children:[Object(b.jsx)("h5",{children:"List users"}),Object(b.jsx)("input",{name:"number",type:"text",placeholder:"10",defaultValue:"25"}),Object(b.jsxs)("table",{className:"table table-striped table-bordered overflow-auto d-block",style:{width:"fit-content",maxHeight:"50vh"},children:[Object(b.jsxs)("thead",{children:[Object(b.jsx)("th",{children:"Login"}),Object(b.jsx)("th",{children:"Pass"}),Object(b.jsx)("th",{children:"Cash"})]}),Object(b.jsx)("tbody",{})]}),Object(b.jsx)("button",{name:"button",children:"List"})]}),Object(b.jsx)("hr",{})]}):Object(b.jsx)(b.Fragment,{children:"not authorized"})};var L=function(){var e=Object(i.f)(),t=Object(j.a)(e,2),n=(t[0],t[1]),s=Object(c.useState)(JSON.parse(localStorage.getItem("user"))),a=Object(j.a)(s,2),r=a[0],o=a[1],h=Object(c.useState)({}),x=Object(j.a)(h,2),v=x[0],y=x[1],N=Object(c.useState)(0),S=Object(j.a)(N,2),L=S[0],k=S[1],T=Object(c.useState)(!0),R=Object(j.a)(T,2),F=R[0],E=R[1];return Object(c.useEffect)(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(!0),r){e.next=5;break}E(!1),e.next=10;break;case 5:return e.next=7,fetch(window.API_LINK+"/getdata",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({PHPSESSID:r.PHPSESSID,login:r.login})}).then((function(e){return e.json()})).then((function(e){e.success?y(Object.assign(v,e.backend)):(o(null),localStorage.removeItem("user"))})).catch((function(e){o(null),localStorage.removeItem("user")}));case 7:return e.next=9,fetch(window.API_LINK+"/getcash",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({PHPSESSID:r.PHPSESSID,login:r.login})}).then((function(e){return e.json()})).then((function(e){y(Object.assign(v,{cash:e.cash})),k(e.cash)}));case 9:E(!1);case 10:case"end":return e.stop()}}),e)}))),[r]),F?Object(b.jsxs)("div",{className:"d-flex mx-auto align-items-center",id:"loadscreen",children:[Object(b.jsx)("strong",{children:"Loading..."}),Object(b.jsx)("div",{class:"spinner-border ms-auto",role:"status","aria-hidden":"true"})]}):Object(b.jsxs)("div",{children:[Object(b.jsx)("header",{className:"mt-2 border-bottom",children:Object(b.jsxs)("div",{className:"col-12 col-md-10 col-lg-8 d-flex mx-auto align-items-center px-2",id:"navitems",children:[Object(b.jsx)(i.a,{href:"/",children:Object(b.jsx)("h4",{id:"logo",children:"TestiKupit"})}),Object(b.jsx)(i.a,{href:"/usertests",style:{marginLeft:"30px"},children:"\u0422\u0435\u0441\u0442\u044b"}),Object(b.jsx)(i.a,{href:"/pay",style:{marginLeft:"30px"},children:"\u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c"}),Object(b.jsx)("div",{style:{marginLeft:"auto"},children:r?Object(b.jsxs)("span",{id:"acc",children:[v.pupil.firstname," ",L/100>>0,".",L%100," RUR",Object(b.jsxs)("span",{style:{marginLeft:"8px"},children:["(",Object(b.jsx)("a",{href:"#",onClick:function(e){e.preventDefault(),localStorage.removeItem("user"),n("/signin"),o(null)},children:"\u0412\u044b\u0439\u0442\u0438"}),")"]})]}):Object(b.jsx)(i.a,{href:"/signin",children:"\u0412\u043e\u0439\u0442\u0438"})})]})}),Object(b.jsx)("main",{children:Object(b.jsx)("div",{className:"col-12 col-md-10 col-lg-8 mx-auto px-2",children:Object(b.jsxs)(i.e,{children:[Object(b.jsx)(i.c,{path:"/",component:A}),Object(b.jsx)(i.c,{path:"/testlist",component:u}),Object(b.jsx)(i.c,{path:"/usertests",component:function(){return Object(b.jsx)(O,{user:r,additionalData:v})}}),Object(b.jsx)(i.c,{path:"/addtest",component:p}),Object(b.jsx)(i.c,{path:"/purchase",children:function(){return Object(b.jsx)(i.b,{to:"/usertests"})}}),Object(b.jsx)(i.c,{path:"/purchase/:id",children:function(e){return Object(b.jsx)(f,{id:e.id,user:r,additionalData:v,cash:L,setcash:k})}}),Object(b.jsx)(i.c,{path:"/signin",component:function(){return Object(b.jsx)(m,{setuser:o,setAdditionalData:y})}}),Object(b.jsx)(i.c,{path:"/afterlife",component:g}),Object(b.jsx)(i.c,{path:"/pay",component:function(){return Object(b.jsx)(w,{user:r,additionalData:v})}}),Object(b.jsx)(i.c,{path:"/success",component:I}),Object(b.jsx)(i.c,{path:"/admin",component:D}),Object(b.jsx)(i.c,{path:"",component:P})]})})}),Object(b.jsx)("footer",{className:"border-top bg-light",children:Object(b.jsxs)("div",{className:"col-12 col-md-10 col-lg-8 mx-auto text-black py-2 px-2",children:["By ",Object(b.jsx)("a",{href:"https://vk.com/gluchnosti",target:"_blank",className:"text-black",style:{textDecoration:"underline",color:"#AAAAAA"},children:"gluchnosti"})]})})]})};window.API_LINK="https://toolstools.herokuapp.com/tests/api",r.a.render(Object(b.jsx)(s.a.StrictMode,{children:Object(b.jsx)(i.d,{base:"/tests",children:Object(b.jsx)(L,{})})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.e479481c.chunk.js.map